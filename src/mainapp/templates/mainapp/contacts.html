{% extends 'mainapp/base.html' %}

{% block title %} Контакты {% endblock title %}

{% block body %}
<div class="container content" style="padding-top: 30px;">
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <h4>Мы находимся по адресам</h4>
      <div class="contacts-list">
      {% for club in clubs %}
        <div class="row contacts-row">
          <div class="col-md-5 contacts-col">
            <div><i class="fa fa-map-marker d-text-c" aria-hidden="true"></i> {{club.address}}</div>
          </div>
          <div class="col-md-3 contacts-col">
            <div><i class="fa fa-phone d-text-c" aria-hidden="true"></i><span class="{{club.callibri}}">{{club.phone}}</span></div>
          </div>
          <div class="col-md-4 contacts-col">
            <div><i class="fa fa-envelope d-text-c" aria-hidden="true"></i> <a href="mailto:{{club.email}}">{{club.email}}</a></div>
          </div>
          <div class="clearfix"></div>
        </div>
      {% endfor %}
      </div>
      <br /><br />
      <div id="map" class="contact-map"></div>
      <script>
        function initMap() {
          var city = {lat: 56.8389261, lng: 60.6057025};
          var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 12,
            center: city
          });
          var positions = [
            {map: new google.maps.LatLng(56.813548,60.5911959),address: "Фурманова, 117",},
            {map: new google.maps.LatLng(56.8297263,60.6715995), address: "Дублер Сибирского Тракта, 2 (ТРК «КомсоМОЛЛ»)"}
          ];

          positions.forEach(function(item){
            var marker = new google.maps.Marker({
                position: item.map,
                map: map,
                title:item.address
            });
            var infowindow = new google.maps.InfoWindow({
              content: item.address
            });
            marker.addListener('click', function(){
              infowindow.open(map,marker);
            });
          })
        }
      </script>
      <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCtRKA4GEvvv9zd3dvLkiKobYI-yDfVR2E&callback=initMap"></script>
    </div>
    <div class="clearfix"></div>
  </div>
</div>

{% endblock body %}
